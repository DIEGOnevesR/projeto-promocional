name: Keep Render Services Alive

on:
  schedule:
    # Executa a cada 10 minutos
    - cron: '*/10 * * * *'
  workflow_dispatch:  # Permite execuÃ§Ã£o manual

jobs:
  ping-services:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    
    steps:
      - name: Ping Backend Principal
        run: |
          echo "ğŸ”„ Fazendo ping no Backend Principal..."
          curl -f -s -o /dev/null -w "Status: %{http_code}\n" \
            https://projeto-promocional.onrender.com/health || echo "âŒ Falha no ping"
      
      - name: Ping WhatsApp Sender
        run: |
          echo "ğŸ”„ Fazendo ping no WhatsApp Sender..."
          curl -f -s -o /dev/null -w "Status: %{http_code}\n" \
            https://whatsapp-sender-weq8.onrender.com/health || echo "âŒ Falha no ping"
      
      - name: Ping Gmail Monitor
        run: |
          echo "ğŸ”„ Fazendo ping no Gmail Monitor..."
          curl -f -s -o /dev/null -w "Status: %{http_code}\n" \
            https://gmail-monitor-pfts.onrender.com/health || echo "âŒ Falha no ping"
      
      - name: Resumo
        run: |
          echo "âœ… Keep-alive executado com sucesso!"
          echo "ğŸ“… PrÃ³xima execuÃ§Ã£o em 10 minutos"

